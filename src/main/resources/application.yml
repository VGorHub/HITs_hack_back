###############################################################################
# üìö Application configuration for **ai‚Äëreminder‚Äëback**
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:
#   ‚ûä COMMON ‚Äì –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª—è—Ö.
#   ‚ûã PROD   ‚Äì –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã / k8s / staging / production.
#   ‚ûå LOCAL  ‚Äì —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ.
#
# ‚Üí –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
#   –≤–∏–¥–∞  ENV_NAME  ‚Äî>  spring.property.name
#
#   –ù–∞–ø—Ä–∏–º–µ—Ä:
#     N8N_WEBHOOK_URL   ‚Üí  n8n.webhook.url
#     SERVER_PORT       ‚Üí  server.port
#
# ‚Üí –ó–∞–ø—É—Å–∫
#     # –ª–æ–∫–∞–ª—å–Ω–æ
#     SPRING_PROFILES_ACTIVE=local ./gradlew bootRun
#
#     # docker‚Äëcompose (prod‚Äëprofile)
#     docker compose up -d   # .env –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç PROD‚Äë–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
###############################################################################

###############################################################################
# ‚ûä COMMON (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª—è—Ö)
###############################################################################

spring:
  application:
    name: ai-reminder

  datasource:
    url:      ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/ai_reminder}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:postgres}
    hikari:
      maximum-pool-size: ${SPRING_DATASOURCE_MAX_POOL_SIZE:10}

  jpa:
    hibernate:
      ddl-auto: validate          # Flyway —Ä—É–ª–∏—Ç —Å—Ö–µ–º–æ–π, –Ω–µ –¥–∞—ë–º Hibernate –º–µ–Ω—è—Ç—å –µ—ë
    open-in-view: false
  flyway:
    enabled: true

server:
  port: ${SERVER_PORT:8443}        # –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—è—Ö
  shutdown: graceful

logging:
  level:
    root: INFO

# JWT / access‚Äëtokens
token:
  signing:
    key: ${TOKEN_SIGNING_KEY:53A73E5F1C4E0A2D3B5F2D784E6A1B423D6F247D1F6E5C3A596D635A75327855}

# >>> WebSocket / Socket.IO
socketio:
  port: ${SOCKETIO_PORT:9092}

n8n:
  webhook:
    url: ${N8N_WEBHOOK_URL:https://n8n.gigafs.v6.navy/webhook/webhook/ai-reminder}



###############################################################################
# ‚ûã PROD profile  ‚Üí  SPRING_PROFILES_ACTIVE=prod
###############################################################################
---
spring:
  config:
    activate:
      on-profile: prod

# –í –ø—Ä–æ–¥–µ –ø–æ—Ä—Ç —á–∞—â–µ –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é SERVER_PORT –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
server:
  port: ${SERVER_PORT:8443}
  ssl:
    enabled: true
    key-store: file:/app/keystore.p12      # –ø—É—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    key-store-password: ${KEY_STORE_PASSWORD}
    key-store-type: PKCS12
    key-alias: ai-reminder

logging:
  level:
    root: INFO
    org.springframework.web: WARN

###############################################################################
# ‚ûå LOCAL profile ‚Üí  SPRING_PROFILES_ACTIVE=local
###############################################################################
---
spring:
  config:
    activate:
      on-profile: local

server:
  port: 8443
  ssl:
    enabled: true
    key-store: classpath:keystore.p12        # –ø–æ–ª–æ–∂–∏ —Ñ–∞–π–ª –≤ src/main/resources
    key-store-password: changeit             # –∏–ª–∏ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å
    key-store-type: PKCS12
    key-alias: ai-reminder

# –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
logging:
  level:
    ru.gigastack.ai_reminder_back: DEBUG
    root: INFO
    org.springframework.web: DEBUG
